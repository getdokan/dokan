dokanWebpack([6],{289:function(a,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=e(20),o=e.n(n),c=e(290),i=e.n(c),r=e(21),d=e.n(r);!function(a){var t=a("#dokan-product-category-modal"),e=a("#dokan-cat-search-res"),n=a("#dokan-cat-search-res-ul"),c=a(".dokan-single-categories-right"),r=a(".dokan-single-categories-left"),s=[],l=[],u="",g="",h={init:function(){a("body").on("click",".dokan-product-category-li",this.categoryLiClick),a("body").on("click",".dokan-cat-search-res-li",this.clickSearchResLi),a("body").on("keyup","#dokan-single-cat-search-input",h.debounce(this.typeToSearch,500)),a("#dokan-single-categories").scroll(this.categoryScroll),a("body").on("click",".dokan-single-categories-right-box",h.indicatorScrollTo),a("body").on("click",".dokan-single-categories-left-box",function(){h.indicatorScrollTo(!1)}),a("body").on("click",".dokan-single-cat-select-btn",h.chooseCatButton),a("body").on("click",".dokan-category-open-modal",h.initModal),a("body").on("click","#dokan-category-close-modal",h.hideCategoryModal),a("body").on("click",".dokan-single-cat-add-btn",h.addANewCatBox),a("body").on("click",".dokan-select-product-category-remove-container",h.removeCatBox)},initModal:function(){u=a(this).data("dokansclevel");var t=a(this).siblings(".dokan-cat-inputs-holder").find(".dokan_chosen_product_cat");h.openModal(t)},removeCatBox:function(){a(this).closest(".dokan-select-product-category-container")[0].remove()},categoryLiClick:function(){var t=a(this).data(),e=t.catlevel,n=t.termId,o=t.name,c=t.haschild;g=n,h.removeAfterClickedUls(e,n),h.loadChildCategories(e,n,o,c)},clickSearchResLi:function(){var t=a(this).data(),e=t.termid,n=t.index;t.name;e&&(g=e,h.setCatUiBasedOnOneCat(e,l[n]))},typeToSearch:function(){var t=a(this).val();a("#dokan-cat-search-text-limit").html(t.length),t.length>0?(h.hideSearchResults(!1),h.doSearchCates(t)):h.hideSearchResults()},categoryScroll:function(){var t=a("#dokan-single-categories").get(0).scrollWidth-a("#dokan-single-categories").innerWidth(),e=a(this).scrollLeft(),n=t-e;h.showIndicators(r,e),h.showIndicators(c,n)},chooseCatButton:function(){a(".dokan_chosen_product_cat_".concat(g)).length?dokan_sweetalert(dokan_product_category_data.i18n.duplicate_category,{icon:"warning"}):(h.setCatName(h.getSelectedLabel()),h.setCatId(g),h.hideCategoryModal())},setCatUiBasedOnOneCat:function(a,t){h.disableDoneBtn(t.children.length>0);var e=i()(t.parents),n=i()(t.parents);e.unshift(0),n.push(Number(a));var o=e.map(function(a,t){return h.getCategoriesWithParentId(a,t+1,n[t])});s=o,h.updateCategoryUi(),h.hideSearchResults(),h.scrollTo(o.length)},doSearchCates:function(a){return o()(d.a.mark(function t(){var e,n,o,c;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(n in e=[],dokan_product_category_data.categories)o=dokan_product_category_data.categories[n],c=o.name,a=a.toLowerCase(),c.toLowerCase().indexOf(a)>=0&&e.push(o);l=e,h.updateSearchResultUi();case 4:case"end":return t.stop()}},t)}))()},hideSearchResults:function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0]?e.addClass("dokan-hide"):e.removeClass("dokan-hide")},showIndicators:function(a,t){t>5?a.removeClass("dokan-hide"):a.addClass("dokan-hide")},showCategoryModal:function(){g="",h.disableDoneBtn(),t.css("display","flex"),h.hideSearchResults(),a("#dokan-single-cat-search-input").val(""),s=[],h.loadAllParentCategories()},disableDoneBtn:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];a(".dokan-single-cat-select-btn").prop("disabled",t)},hideCategoryModal:function(){t.css("display","none")},loadAllParentCategories:function(){s.push(h.getCategoriesWithParentId()),h.updateCategoryUi()},getCategoriesWithParentId:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,e=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=[];for(var o in dokan_product_category_data.categories){var c=dokan_product_category_data.categories[o];c.parent_id==a&&(c.uiActivaion=Number(c.term_id)===e&&"dokan-product-category-li-active",n.push(c))}return{categories:n,level:t,term_id:a}},loadChildCategories:function(a,t,e,n){if(n){h.disableDoneBtn();var o=h.getCategoriesWithParentId(t,a+1);s.push(o),h.updateCategoryUi(),h.scrollTo(a-1)}else h.disableDoneBtn(!1)},updateSearchResultUi:function(){var a="";a=l.map(function(a,t){return'<li data-name="'.concat(a.name,'" data-termid="').concat(a.term_id,'" data-index="').concat(t,'" class="dokan-cat-search-res-li">\n                        <div class="dokan-cat-search-res-item">\n                            ').concat(a.name,'\n                        </div>\n                        <div class="dokan-cat-search-res-history">\n                            ').concat(h.getSearchedParentHistory(a.parents,a.name),"\n                        </div>\n                    </li>")}),0==l.length&&(a='<li data-name="" data-termid="" data-index="" class="dokan-cat-search-res-li">\n                        <div class="dokan-cat-search-res-item">\n                            '.concat(window.dokan.i18n_no_result_found,'\n                        </div>\n                        <div class="dokan-cat-search-res-history">\n                        </div>\n                    </li>')),n.html(a)},getSearchedParentHistory:function(a,t){var e="";return e=a.map(function(a,t){return'<span class="dokan-cat-search-res-suggestion">'.concat(h.findCategory(a).name,'</span>\n                    <span class="dokan-cat-search-res-indicator"><i class="fas fa-caret-right"></i></span>')}).join(""),e+='<span class="dokan-cat-search-res-suggestion-selected">'.concat(h.highlight(t),"</span>")},highlight:function(t){var e=a("#dokan-single-cat-search-input").val().toLowerCase(),n=t.toLowerCase().indexOf(e);if(n>=0)return"<span>".concat(t.substring(0,n),"</span>\n                    <span class='dokan-cat-highlight'>").concat(t.substring(n,n+e.length),"</span>\n                    <span>").concat(t.substring(n+e.length),"</span>")},updateCategoryUi:function(){var t=h.getCatUlHtml();a("#dokan-single-categories").html(t),h.updateSelectedLabel(),h.adjustCategoryPosition()},updateSelectedLabel:function(){a("#dokan-selected-category-span").html(h.getSelectedLabel())},adjustCategoryPosition:function(){a.each(a(".dokan-product-category-ul").find(".dokan-product-category-li-active"),function(t,e){var n=a(e).data(),o=n.catlevel,c=n.indexli;a("#".concat(o,"-level-cat-ul")).scrollTop(36.38*c)})},getSelectedLabel:function(){var t=a(".dokan-product-category-li-active"),e=t.length,n="";return t.each(function(a,t){var o=t.dataset;n+='<span class="dokan-selected-category-product '.concat(e==a+1?"dokan-cat-selected":"",'">').concat(o.name,"</span>\n                ").concat(e!=a+1?'<span class="dokan-selected-category-icon"><i class="fas fa-chevron-right"></i></span>':"")}),n},updateCategorySelection:function(a,t){var e=s[a-1].categories.map(function(a){return a.term_id==t?a.uiActivaion="dokan-product-category-li-active":a.uiActivaion="",a});s[a-1].categories=e,h.updateCategoryUi()},getCatUlHtml:function(){return s.map(function(a,t){var e=h.getCatLiHtml(a.categories,a.level);return'<ul id="'.concat(a.level,'-level-cat-ul" class="dokan-product-category-ul ').concat(a.level,'-level-cat" data-level="').concat(a.level,'">').concat(e,"</ul>")})},getCatLiHtml:function(a,t){var e="";return a.forEach(function(a,n){e+='<li data-indexli="'.concat(n,'" data-haschild="').concat(a.children.length>0,'" data-name="').concat(a.name,'" data-catLevel="').concat(t,'" class="').concat(a.uiActivaion?a.uiActivaion:""," dokan-product-category-li ").concat(a.children.length>0?"dokan-cat-has-child":"",'" data-term-id="').concat(a.term_id,'" data-taxonomy="product_cat">\n                        <span class="dokan-product-category">').concat(a.name,'</span>\n                        <span class="dokan-product-category-icon"><i class="fas fa-chevron-right"></i></span>\n                    </li>')}),e},removeAfterClickedUls:function(a,t){var e=s.filter(function(t){if(t.level<=a)return t});s=e,h.updateCategorySelection(a,t)},scrollTo:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;a("#dokan-single-categories").animate({scrollLeft:300*t},800)},indicatorScrollTo:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];a("#dokan-single-categories").animate({scrollLeft:"".concat(t?"+":"-","=350px")},800)},setCatId:function(t){var e='<input type="hidden" class="dokan_chosen_product_cat dokan_chosen_product_cat_'.concat(t,'" name="chosen_product_cat[]" value="').concat(t,'"></input>');a(".dokan-cih-level-".concat(u)).html(e)},setCatName:function(t){a(".dokan-ssct-level-".concat(u)).html(t)},addANewCatBox:function(){var t=a(".dokan-add-new-cat-box .dokan-select-product-category-container").length,e=a(".dokan-add-new-cat-box .dokan-select-product-category-container")[t-1],n=a(e).find("#dokan-category-open-modal").data("dokansclevel")+1;isNaN(n)&&(n=0);var o='\n                <div class="dokan-select-product-category-container">\n                    <div class="dokan-form-group dokan-select-product-category dokan-category-open-modal" data-dokansclevel="'.concat(n,'" id="dokan-category-open-modal">\n                        <span id="dokan_product_cat_res" class="dokan-select-product-category-title dokan-ssct-level-').concat(n,'">- ').concat(dokan_product_category_data.i18n.select_a_category,' -</span>\n                        <span class="dokan-select-product-category-icon"><i class="fas fa-edit"></i></span>\n                    </div>\n                        ').concat(dokan_product_category_data.is_single?"":'\n                        <div class="dokan-select-product-category-remove-container">\n                            <span class="dokan-select-product-category-remove"><i class="fas fa-times"></i></span>\n                        </div>','\n                    <span class="dokan-cat-inputs-holder dokan-cih-level-').concat(n,'" ></span>\n                </div>\n                ');a(".dokan-add-new-cat-box").append(o)},findCategory:function(a){return dokan_product_category_data.categories[a]},debounce:function(a,t,e){var n;return function(){var o=this,c=arguments,i=e&&!n;clearTimeout(n),n=setTimeout(function(){n=null,e||a.apply(o,c)},t),i&&a.apply(o,c)}},openModal:function(a){if(h.showCategoryModal(),a.length>0){var t=a.val();g=t;var e=dokan_product_category_data.categories[t];h.setCatUiBasedOnOneCat(t,e)}}};a(document).ready(function(){h.init()})}(jQuery)}},[289]);