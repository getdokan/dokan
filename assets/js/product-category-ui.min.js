dokanWebpack([6],{287:function(a,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=e(10),o=e.n(n),c=e(288),i=e.n(c),r=e(11),d=e.n(r);!function(a){var t=a("#dokan-product-category-modal"),e=a("#dokan-cat-search-res"),n=a("#dokan-cat-search-res-ul"),c=a(".dokan-single-categories-right"),r=a(".dokan-single-categories-left"),s=[],l=[],u="",g=0,h="",p={init:function(){a("body").on("click",".dokan-product-category-li",this.categoryLiClick),a("body").on("click",".dokan-cat-search-res-li",this.clickSearchResLi),a("body").on("keyup","#dokan-single-cat-search-input",p.debounce(this.typeToSearch,500)),a("body").on("scroll","#dokan-single-categories",this.categoryScroll),a("body").on("click",".dokan-single-categories-right-box",p.indicatorScrollTo),a("body").on("click",".dokan-single-categories-left-box",function(){p.indicatorScrollTo(!1)}),a("body").on("click",".dokan-single-cat-select-btn",p.chooseCatButton),a("body").on("click",".dokan-category-open-modal",p.initModal),a("body").on("click","#dokan-category-close-modal",p.hideCategoryModal),a("body").on("click",".dokan-single-cat-add-btn",p.addANewCatBox),a("body").on("click",".dokan-select-product-category-remove-container",p.removeCatBox)},initModal:function(){u=a(this).data("dokansclevel"),g=a(this).data("selectfor");var t=a(this).siblings(".dokan-cat-inputs-holder").find(".dokan_chosen_product_cat");a(this).parent().attr("data-activate","yes"),p.openModal(t)},removeCatBox:function(){a(this).closest(".dokan-select-product-category-container")[0].remove()},categoryLiClick:function(){var t=a(this).data(),e=t.catlevel,n=t.termId,o=t.name,c=t.haschild;h=n,p.removeAfterClickedUls(e,n),p.loadChildCategories(e,n,o,c)},clickSearchResLi:function(){var t=a(this).data(),e=t.termid,n=t.index;t.name;e&&(h=e,p.setCatUiBasedOnOneCat(e,l[n]))},typeToSearch:function(){var t=a(this).val();a("#dokan-cat-search-text-limit").html(t.length),t.length>0?(p.hideSearchResults(!1),p.doSearchCates(t)):p.hideSearchResults()},categoryScroll:function(){var t=a("#dokan-single-categories").get(0).scrollWidth-a("#dokan-single-categories").innerWidth(),e=a(this).scrollLeft(),n=t-e;p.showIndicators(r,e),p.showIndicators(c,n)},chooseCatButton:function(){var t=".dokan-select-product-category-container.dokan_select_cat_for_".concat(g,"_").concat(u,"[data-activate='yes']");a(t).parent().children(".dokan-select-product-category-container").children(".dokan-cat-inputs-holder").find(".dokan_chosen_product_cat_".concat(h)).length?dokan_sweetalert(dokan_product_category_data.i18n.duplicate_category,{icon:"warning"}):(p.setCatName(p.getSelectedLabel(),a(t)),p.setCatId(h,a(t)),p.hideCategoryModal(),wp.hooks.doAction("dokan_selected_multistep_category",h),a(t).attr("data-activate","no"))},setCatUiBasedOnOneCat:function(a,t){var e=void 0!==t.children.length&&t.children.length>0;p.disableDoneBtn(e);var n=i()(t.parents),o=i()(t.parents);n.unshift(0),o.push(Number(a));var c=n.map(function(a,t){return p.getCategoriesWithParentId(a,t+1,o[t])});s=c,p.updateCategoryUi(),p.hideSearchResults(),p.scrollTo(c.length)},doSearchCates:function(a){return o()(d.a.mark(function t(){var e,n,o,c;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(n in e=[],dokan_product_category_data.categories)o=dokan_product_category_data.categories[n],c=o.name,a=a.toLowerCase(),c.toLowerCase().indexOf(a)>=0&&e.push(o);l=e,p.updateSearchResultUi();case 4:case"end":return t.stop()}},t)}))()},hideSearchResults:function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0]?e.addClass("dokan-hide"):e.removeClass("dokan-hide")},showIndicators:function(a,t){t>5?a.removeClass("dokan-hide"):a.addClass("dokan-hide")},showCategoryModal:function(){h="",p.disableDoneBtn(),t.css("display","flex"),p.hideSearchResults(),a("#dokan-single-cat-search-input").val(""),s=[],p.loadAllParentCategories()},disableDoneBtn:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];a(".dokan-single-cat-select-btn").prop("disabled",t)},hideCategoryModal:function(){t.css("display","none"),a(".dokan-select-product-category-container").attr("data-activate","no")},loadAllParentCategories:function(){s.push(p.getCategoriesWithParentId()),p.updateCategoryUi()},getCategoriesWithParentId:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,e=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=[];for(var o in dokan_product_category_data.categories){var c=dokan_product_category_data.categories[o];c.parent_id==a&&(c.uiActivaion=Number(c.term_id)===e&&"dokan-product-category-li-active",n.push(c))}return n.sort(function(a,t){return a.name.toLowerCase()>t.name.toLowerCase()?1:t.name.toLowerCase()>a.name.toLowerCase()?-1:0}),{categories:n,level:t,term_id:a}},loadChildCategories:function(a,t,e,n){var o=dokan_product_category_data.any_category_selection;if(n&&!0!==Boolean(o)?p.disableDoneBtn():p.disableDoneBtn(!1),n){var c=p.getCategoriesWithParentId(t,a+1);s.push(c),p.updateCategoryUi(),p.scrollTo(a)}},updateSearchResultUi:function(){var a="";a=l.map(function(a,t){return'<li data-name="'.concat(a.name,'" data-termid="').concat(a.term_id,'" data-index="').concat(t,'" class="dokan-cat-search-res-li">\n                        <div class="dokan-cat-search-res-item">\n                            ').concat(a.name,'\n                        </div>\n                        <div class="dokan-cat-search-res-history">\n                            ').concat(p.getSearchedParentHistory(a.parents,a.name),"\n                        </div>\n                    </li>")}),0==l.length&&(a='<li data-name="" data-termid="" data-index="" class="dokan-cat-search-res-li">\n                        <div class="dokan-cat-search-res-item">\n                            '.concat(window.dokan.i18n_no_result_found,'\n                        </div>\n                        <div class="dokan-cat-search-res-history">\n                        </div>\n                    </li>')),n.html(a)},getSearchedParentHistory:function(a,t){var e="";return e=a.map(function(a,t){return'<span class="dokan-cat-search-res-suggestion">'.concat(p.findCategory(a).name,'</span>\n                    <span class="dokan-cat-search-res-indicator"><i class="fas fa-caret-right"></i></span>')}).join(""),e+='<span class="dokan-cat-search-res-suggestion-selected">'.concat(p.highlight(t),"</span>")},highlight:function(t){var e=a("#dokan-single-cat-search-input").val().toLowerCase(),n=t.toLowerCase().indexOf(e);if(n>=0)return"<span>".concat(t.substring(0,n),"</span>\n                    <span class='dokan-cat-highlight'>").concat(t.substring(n,n+e.length),"</span>\n                    <span>").concat(t.substring(n+e.length),"</span>")},updateCategoryUi:function(){var t=p.getCatUlHtml();a("#dokan-single-categories").html(t),p.updateSelectedLabel(),p.adjustCategoryPosition()},updateSelectedLabel:function(){a("#dokan-selected-category-span").html(p.getSelectedLabel())},adjustCategoryPosition:function(){a.each(a(".dokan-product-category-ul").find(".dokan-product-category-li-active"),function(t,e){var n=a(e).data(),o=n.catlevel,c=n.indexli;a("#".concat(o,"-level-cat-ul")).scrollTop(36.38*c)})},getSelectedLabel:function(){var t=a(".dokan-product-category-li-active"),e=t.length,n="";return t.each(function(a,t){var o=t.dataset;n+='<span class="dokan-selected-category-product '.concat(e==a+1?"dokan-cat-selected":"",'">').concat(o.name,"</span>\n                ").concat(e!=a+1?'<span class="dokan-selected-category-icon"><i class="fas fa-chevron-right"></i></span>':"")}),n},updateCategorySelection:function(a,t){var e=s[a-1].categories.map(function(a){return a.term_id==t?a.uiActivaion="dokan-product-category-li-active":a.uiActivaion="",a});s[a-1].categories=e,p.updateCategoryUi()},getCatUlHtml:function(){return s.map(function(a,t){var e=p.getCatLiHtml(a.categories,a.level);return'<ul id="'.concat(a.level,'-level-cat-ul" class="dokan-product-category-ul ').concat(a.level,'-level-cat" data-level="').concat(a.level,'">').concat(e,"</ul>")})},getCatLiHtml:function(a,t){var e="";return a.forEach(function(a,n){e+='<li data-indexli="'.concat(n,'" data-haschild="').concat(a.children.length>0,'" data-name="').concat(a.name,'" data-catLevel="').concat(t,'" class="').concat(a.uiActivaion?a.uiActivaion:""," dokan-product-category-li ").concat(a.children.length>0?"dokan-cat-has-child":"",'" data-term-id="').concat(a.term_id,'" data-taxonomy="product_cat">\n                        <span class="dokan-product-category">').concat(a.name,'</span>\n                        <span class="dokan-product-category-icon"><i class="fas fa-chevron-right"></i></span>\n                    </li>')}),e},removeAfterClickedUls:function(a,t){var e=s.filter(function(t){if(t.level<=a)return t});s=e,p.updateCategorySelection(a,t)},scrollTo:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;a("#dokan-single-categories").animate({scrollLeft:300*t},800)},indicatorScrollTo:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];a("#dokan-single-categories").animate({scrollLeft:"".concat(t?"+":"-","=350px")},800)},setCatId:function(a,t){var e='<input data-field-name="chosen_product_cat" type="hidden" class="dokan_chosen_product_cat dokan_chosen_product_cat_'.concat(a,'" name="chosen_product_cat[]" value="').concat(a,'"></input>');e+='<input type="hidden" name="chosen_product_cat_bulk[]" value="'.concat(a,'"></input>'),t.children(".dokan-cih-level-".concat(u)).html(e)},setCatName:function(a,t){t.children(".dokan-select-product-category").children(".dokan-ssct-level-".concat(u)).html(a)},addANewCatBox:function(){var t=a(this)[0],e=a(t).data("selectfor");g=e;var n=a(this).parent().siblings(".dokan-add-new-cat-box").children(".dokan-select-product-category-container").length,o=a(this).parent().siblings(".dokan-add-new-cat-box").children(".dokan-select-product-category-container")[n-1],c=a(o).find("#dokan-category-open-modal").data("dokansclevel")+1;isNaN(c)&&(c=0);var i='\n                <div data-activate="no" class="dokan-select-product-category-container dokan_select_cat_for_'.concat(e,"_").concat(c,'">\n                    <div class="dokan-form-group dokan-select-product-category dokan-category-open-modal" data-dokansclevel="').concat(c,'" id="dokan-category-open-modal" data-selectfor="').concat(e,'">\n                        <span id="dokan_product_cat_res" class="dokan-select-product-category-title dokan-ssct-level-').concat(c,'">- ').concat(dokan_product_category_data.i18n.select_a_category,' -</span>\n                        <span class="dokan-select-product-category-icon"><i class="fas fa-edit"></i></span>\n                    </div>\n                        ').concat(dokan_product_category_data.is_single?"":'\n                        <div class="dokan-select-product-category-remove-container">\n                            <span class="dokan-select-product-category-remove"><i class="fas fa-times"></i></span>\n                        </div>','\n                    <span class="dokan-cat-inputs-holder dokan-cih-level-').concat(c,'" ></span>\n                </div>\n                ');a(this).parent().parent().children(".cat_box_for_".concat(e)).append(i)},findCategory:function(a){return dokan_product_category_data.categories[a]},debounce:function(a,t,e){var n;return function(){var o=this,c=arguments,i=e&&!n;clearTimeout(n),n=setTimeout(function(){n=null,e||a.apply(o,c)},t),i&&a.apply(o,c)}},openModal:function(a){if(p.showCategoryModal(),a.length>0){var t=a.val();h=t;var e=dokan_product_category_data.categories[t];p.setCatUiBasedOnOneCat(t,e)}}};a(document).ready(function(){p.init()})}(jQuery)}},[287]);